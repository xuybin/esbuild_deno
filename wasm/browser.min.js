var Ie=Object.defineProperty,rt=Object.defineProperties;var nt=Object.getOwnPropertyDescriptors;var We=Object.getOwnPropertySymbols;var lt=Object.prototype.hasOwnProperty,it=Object.prototype.propertyIsEnumerable;var qe=(e,t,r)=>t in e?Ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Te=(e,t)=>{for(var r in t||(t={}))lt.call(t,r)&&qe(e,r,t[r]);if(We)for(var r of We(t))it.call(t,r)&&qe(e,r,t[r]);return e},De=(e,t)=>rt(e,nt(t));var st=(e,t)=>{for(var r in t)Ie(e,r,{get:t[r],enumerable:!0})};var Ae={};st(Ae,{analyzeMetafile:()=>St,analyzeMetafileSync:()=>$t,build:()=>wt,buildSync:()=>xt,default:()=>Pt,formatMessages:()=>Ot,formatMessagesSync:()=>kt,initialize:()=>Mt,serve:()=>vt,transform:()=>Rt,transformSync:()=>Et,version:()=>bt});function Fe(e){let t=s=>{if(s===null)r.write8(0);else if(typeof s=="boolean")r.write8(1),r.write8(+s);else if(typeof s=="number")r.write8(2),r.write32(s|0);else if(typeof s=="string")r.write8(3),r.write(ce(s));else if(s instanceof Uint8Array)r.write8(4),r.write(s);else if(s instanceof Array){r.write8(5),r.write32(s.length);for(let d of s)t(d)}else{let d=Object.keys(s);r.write8(6),r.write32(d.length);for(let i of d)r.write(ce(i)),t(s[i])}},r=new xe;return r.write32(0),r.write32(e.id<<1|+!e.isRequest),t(e.value),Ne(r.buf,r.len-4,0),r.buf.subarray(0,r.len)}function ze(e){let t=()=>{switch(r.read8()){case 0:return null;case 1:return!!r.read8();case 2:return r.read32();case 3:return he(r.read());case 4:return r.read();case 5:{let f=r.read32(),l=[];for(let h=0;h<f;h++)l.push(t());return l}case 6:{let f=r.read32(),l={};for(let h=0;h<f;h++)l[he(r.read())]=t();return l}default:throw new Error("Invalid packet")}},r=new xe(e),s=r.read32(),d=(s&1)===0;s>>>=1;let i=t();if(r.ptr!==e.length)throw new Error("Invalid packet");return{id:s,isRequest:d,value:i}}var xe=class{constructor(t=new Uint8Array(1024)){this.buf=t;this.len=0;this.ptr=0}_write(t){if(this.len+t>this.buf.length){let r=new Uint8Array((this.len+t)*2);r.set(this.buf),this.buf=r}return this.len+=t,this.len-t}write8(t){let r=this._write(1);this.buf[r]=t}write32(t){let r=this._write(4);Ne(this.buf,t,r)}write(t){let r=this._write(4+t.length);Ne(this.buf,t.length,r),this.buf.set(t,r+4)}_read(t){if(this.ptr+t>this.buf.length)throw new Error("Invalid packet");return this.ptr+=t,this.ptr-t}read8(){return this.buf[this._read(1)]}read32(){return je(this.buf,this._read(4))}read(){let t=this.read32(),r=new Uint8Array(t),s=this._read(r.length);return r.set(this.buf.subarray(s,s+t)),r}},ce,he;if(typeof TextEncoder!="undefined"&&typeof TextDecoder!="undefined"){let e=new TextEncoder,t=new TextDecoder;ce=r=>e.encode(r),he=r=>t.decode(r)}else if(typeof Buffer!="undefined")ce=e=>{let t=Buffer.from(e);return t instanceof Uint8Array||(t=new Uint8Array(t)),t},he=e=>{let{buffer:t,byteOffset:r,byteLength:s}=e;return Buffer.from(t,r,s).toString()};else throw new Error("No UTF-8 codec found");function je(e,t){return e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24}function Ne(e,t,r){e[r++]=t,e[r++]=t>>8,e[r++]=t>>16,e[r++]=t>>24}function Ke(e){if(e+="",e.indexOf(",")>=0)throw new Error(`Invalid target: ${e}`);return e}var $e=()=>null,I=e=>typeof e=="boolean"?null:"a boolean",at=e=>typeof e=="boolean"||typeof e=="object"&&!Array.isArray(e)?null:"a boolean or an object",m=e=>typeof e=="string"?null:"a string",Me=e=>e instanceof RegExp?null:"a RegExp object",Oe=e=>typeof e=="number"&&e===(e|0)?null:"an integer",Le=e=>typeof e=="function"?null:"a function",V=e=>Array.isArray(e)?null:"an array",oe=e=>typeof e=="object"&&e!==null&&!Array.isArray(e)?null:"an object",ut=e=>e instanceof WebAssembly.Module?null:"a WebAssembly.Module",ft=e=>typeof e=="object"&&e!==null?null:"an array or an object",_e=e=>typeof e=="object"&&!Array.isArray(e)?null:"an object or null",Ye=e=>typeof e=="string"||typeof e=="boolean"?null:"a string or a boolean",ct=e=>typeof e=="string"||typeof e=="object"&&e!==null&&!Array.isArray(e)?null:"a string or an object",dt=e=>typeof e=="string"||Array.isArray(e)?null:"a string or an array",pt=e=>typeof e=="string"||e instanceof Uint8Array?null:"a string or a Uint8Array";function n(e,t,r,s){let d=e[r];if(t[r+""]=!0,d===void 0)return;let i=s(d);if(i!==null)throw new Error(`"${r}" must be ${i}`);return d}function Y(e,t,r){for(let s in e)if(!(s in t))throw new Error(`Invalid option ${r}: "${s}"`)}function Qe(e){let t=Object.create(null),r=n(e,t,"wasmURL",m),s=n(e,t,"wasmModule",ut),d=n(e,t,"worker",I);return Y(e,t,"in initialize() call"),{wasmURL:r,wasmModule:s,worker:d}}function He(e){let t;if(e!==void 0){t=Object.create(null);for(let r of Object.keys(e)){let s=e[r];if(typeof s=="string"||s===!1)t[r]=s;else throw new Error(`Expected ${JSON.stringify(r)} in mangle cache to map to either a string or false`)}}return t}function Ce(e,t,r,s,d){let i=n(t,r,"color",I),f=n(t,r,"logLevel",m),l=n(t,r,"logLimit",Oe);i!==void 0?e.push(`--color=${i}`):s&&e.push("--color=true"),e.push(`--log-level=${f||d}`),e.push(`--log-limit=${l||0}`)}function Ge(e,t,r){let s=n(t,r,"legalComments",m),d=n(t,r,"sourceRoot",m),i=n(t,r,"sourcesContent",I),f=n(t,r,"target",dt),l=n(t,r,"format",m),h=n(t,r,"globalName",m),O=n(t,r,"mangleProps",Me),N=n(t,r,"reserveProps",Me),k=n(t,r,"mangleQuoted",I),C=n(t,r,"minify",I),q=n(t,r,"minifySyntax",I),ae=n(t,r,"minifyWhitespace",I),re=n(t,r,"minifyIdentifiers",I),ne=n(t,r,"drop",V),le=n(t,r,"charset",m),ie=n(t,r,"treeShaking",I),pe=n(t,r,"ignoreAnnotations",I),ue=n(t,r,"jsx",m),ge=n(t,r,"jsxFactory",m),fe=n(t,r,"jsxFragment",m),me=n(t,r,"define",oe),ye=n(t,r,"logOverride",oe),we=n(t,r,"pure",V),g=n(t,r,"keepNames",I);if(s&&e.push(`--legal-comments=${s}`),d!==void 0&&e.push(`--source-root=${d}`),i!==void 0&&e.push(`--sources-content=${i}`),f&&(Array.isArray(f)?e.push(`--target=${Array.from(f).map(Ke).join(",")}`):e.push(`--target=${Ke(f)}`)),l&&e.push(`--format=${l}`),h&&e.push(`--global-name=${h}`),C&&e.push("--minify"),q&&e.push("--minify-syntax"),ae&&e.push("--minify-whitespace"),re&&e.push("--minify-identifiers"),le&&e.push(`--charset=${le}`),ie!==void 0&&e.push(`--tree-shaking=${ie}`),pe&&e.push("--ignore-annotations"),ne)for(let o of ne)e.push(`--drop:${o}`);if(O&&e.push(`--mangle-props=${O.source}`),N&&e.push(`--reserve-props=${N.source}`),k!==void 0&&e.push(`--mangle-quoted=${k}`),ue&&e.push(`--jsx=${ue}`),ge&&e.push(`--jsx-factory=${ge}`),fe&&e.push(`--jsx-fragment=${fe}`),me)for(let o in me){if(o.indexOf("=")>=0)throw new Error(`Invalid define: ${o}`);e.push(`--define:${o}=${me[o]}`)}if(ye)for(let o in ye){if(o.indexOf("=")>=0)throw new Error(`Invalid log override: ${o}`);e.push(`--log-override:${o}=${ye[o]}`)}if(we)for(let o of we)e.push(`--pure:${o}`);g&&e.push("--keep-names")}function gt(e,t,r,s,d){var b;let i=[],f=[],l=Object.create(null),h=null,O=null,N=null;Ce(i,t,l,r,s),Ge(i,t,l);let k=n(t,l,"sourcemap",Ye),C=n(t,l,"bundle",I),q=n(t,l,"watch",at),ae=n(t,l,"splitting",I),re=n(t,l,"preserveSymlinks",I),ne=n(t,l,"metafile",I),le=n(t,l,"outfile",m),ie=n(t,l,"outdir",m),pe=n(t,l,"outbase",m),ue=n(t,l,"platform",m),ge=n(t,l,"tsconfig",m),fe=n(t,l,"resolveExtensions",V),me=n(t,l,"nodePaths",V),ye=n(t,l,"mainFields",V),we=n(t,l,"conditions",V),g=n(t,l,"external",V),o=n(t,l,"loader",oe),a=n(t,l,"outExtension",oe),c=n(t,l,"publicPath",m),F=n(t,l,"entryNames",m),B=n(t,l,"chunkNames",m),$=n(t,l,"assetNames",m),x=n(t,l,"inject",V),P=n(t,l,"banner",oe),M=n(t,l,"footer",oe),R=n(t,l,"entryPoints",ft),L=n(t,l,"absWorkingDir",m),S=n(t,l,"stdin",oe),T=(b=n(t,l,"write",I))!=null?b:d,W=n(t,l,"allowOverwrite",I),ee=n(t,l,"incremental",I)===!0,E=n(t,l,"mangleCache",oe);if(l.plugins=!0,Y(t,l,`in ${e}() call`),k&&i.push(`--sourcemap${k===!0?"":`=${k}`}`),C&&i.push("--bundle"),W&&i.push("--allow-overwrite"),q)if(i.push("--watch"),typeof q=="boolean")N={};else{let u=Object.create(null),v=n(q,u,"onRebuild",Le);Y(q,u,`on "watch" in ${e}() call`),N={onRebuild:v}}if(ae&&i.push("--splitting"),re&&i.push("--preserve-symlinks"),ne&&i.push("--metafile"),le&&i.push(`--outfile=${le}`),ie&&i.push(`--outdir=${ie}`),pe&&i.push(`--outbase=${pe}`),ue&&i.push(`--platform=${ue}`),ge&&i.push(`--tsconfig=${ge}`),fe){let u=[];for(let v of fe){if(v+="",v.indexOf(",")>=0)throw new Error(`Invalid resolve extension: ${v}`);u.push(v)}i.push(`--resolve-extensions=${u.join(",")}`)}if(c&&i.push(`--public-path=${c}`),F&&i.push(`--entry-names=${F}`),B&&i.push(`--chunk-names=${B}`),$&&i.push(`--asset-names=${$}`),ye){let u=[];for(let v of ye){if(v+="",v.indexOf(",")>=0)throw new Error(`Invalid main field: ${v}`);u.push(v)}i.push(`--main-fields=${u.join(",")}`)}if(we){let u=[];for(let v of we){if(v+="",v.indexOf(",")>=0)throw new Error(`Invalid condition: ${v}`);u.push(v)}i.push(`--conditions=${u.join(",")}`)}if(g)for(let u of g)i.push(`--external:${u}`);if(P)for(let u in P){if(u.indexOf("=")>=0)throw new Error(`Invalid banner file type: ${u}`);i.push(`--banner:${u}=${P[u]}`)}if(M)for(let u in M){if(u.indexOf("=")>=0)throw new Error(`Invalid footer file type: ${u}`);i.push(`--footer:${u}=${M[u]}`)}if(x)for(let u of x)i.push(`--inject:${u}`);if(o)for(let u in o){if(u.indexOf("=")>=0)throw new Error(`Invalid loader extension: ${u}`);i.push(`--loader:${u}=${o[u]}`)}if(a)for(let u in a){if(u.indexOf("=")>=0)throw new Error(`Invalid out extension: ${u}`);i.push(`--out-extension:${u}=${a[u]}`)}if(R)if(Array.isArray(R))for(let u of R)f.push(["",u+""]);else for(let[u,v]of Object.entries(R))f.push([u+"",v+""]);if(S){let u=Object.create(null),v=n(S,u,"contents",m),U=n(S,u,"resolveDir",m),w=n(S,u,"sourcefile",m),p=n(S,u,"loader",m);Y(S,u,'in "stdin" object'),w&&i.push(`--sourcefile=${w}`),p&&i.push(`--loader=${p}`),U&&(O=U+""),h=v?v+"":""}let y=[];if(me)for(let u of me)u+="",y.push(u);return{entries:f,flags:i,write:T,stdinContents:h,stdinResolveDir:O,absWorkingDir:L,incremental:ee,nodePaths:y,watch:N,mangleCache:He(E)}}function mt(e,t,r,s){let d=[],i=Object.create(null);Ce(d,t,i,r,s),Ge(d,t,i);let f=n(t,i,"sourcemap",Ye),l=n(t,i,"tsconfigRaw",ct),h=n(t,i,"sourcefile",m),O=n(t,i,"loader",m),N=n(t,i,"banner",m),k=n(t,i,"footer",m),C=n(t,i,"mangleCache",oe);return Y(t,i,`in ${e}() call`),f&&d.push(`--sourcemap=${f===!0?"external":f}`),l&&d.push(`--tsconfig-raw=${typeof l=="string"?l:JSON.stringify(l)}`),h&&d.push(`--sourcefile=${h}`),O&&d.push(`--loader=${O}`),N&&d.push(`--banner=${N}`),k&&d.push(`--footer=${k}`),{flags:d,mangleCache:He(C)}}function Xe(e){let t=new Map,r=new Map,s=new Map,d=new Map,i=null,f=0,l=0,h=new Uint8Array(16*1024),O=0,N=g=>{let o=O+g.length;if(o>h.length){let c=new Uint8Array(o*2);c.set(h),h=c}h.set(g,O),O+=g.length;let a=0;for(;a+4<=O;){let c=je(h,a);if(a+4+c>O)break;a+=4,ne(h.subarray(a,a+c)),a+=c}a>0&&(h.copyWithin(0,a,O),O-=a)},k=g=>{i={reason:g?": "+(g.message||g):""};let o="The service was stopped"+i.reason;for(let a of t.values())a(o,null);t.clear();for(let a of d.values())a.onWait(o);d.clear();for(let a of s.values())try{a(new Error(o),null)}catch(c){console.error(c)}s.clear()},C=(g,o,a)=>{if(i)return a("The service is no longer running"+i.reason,null);let c=f++;t.set(c,(F,B)=>{try{a(F,B)}finally{g&&g.unref()}}),g&&g.ref(),e.writeToStdin(Fe({id:c,isRequest:!0,value:o}))},q=(g,o)=>{if(i)throw new Error("The service is no longer running"+i.reason);e.writeToStdin(Fe({id:g,isRequest:!1,value:o}))},ae=async(g,o)=>{try{switch(o.command){case"ping":{q(g,{});break}case"on-start":{let a=r.get(o.key);a?q(g,await a(o)):q(g,{});break}case"on-resolve":{let a=r.get(o.key);a?q(g,await a(o)):q(g,{});break}case"on-load":{let a=r.get(o.key);a?q(g,await a(o)):q(g,{});break}case"serve-request":{let a=d.get(o.key);a&&a.onRequest&&a.onRequest(o.args),q(g,{});break}case"serve-wait":{let a=d.get(o.key);a&&a.onWait(o.error),q(g,{});break}case"watch-rebuild":{let a=s.get(o.key);try{a&&a(null,o.args)}catch(c){console.error(c)}q(g,{});break}default:throw new Error("Invalid command: "+o.command)}}catch(a){q(g,{errors:[ve(a,e,null,void 0,"")]})}},re=!0,ne=g=>{if(re){re=!1;let a=String.fromCharCode(...g);if(a!=="0.14.42")throw new Error(`Cannot start service: Host version "0.14.42" does not match binary version ${JSON.stringify(a)}`);return}let o=ze(g);if(o.isRequest)ae(o.id,o.value);else{let a=t.get(o.id);t.delete(o.id),o.value.error?a(o.value.error,{}):a(null,o.value)}},le=async(g,o,a,c,F)=>{let B=[],$=[],x={},P={},M=0,R=0,L=[],S=!1;o=[...o];for(let E of o){let y={};if(typeof E!="object")throw new Error(`Plugin at index ${R} must be an object`);let b=n(E,y,"name",m);if(typeof b!="string"||b==="")throw new Error(`Plugin at index ${R} is missing a name`);try{let u=n(E,y,"setup",Le);if(typeof u!="function")throw new Error("Plugin is missing a setup function");Y(E,y,`on plugin ${JSON.stringify(b)}`);let v={name:b,onResolve:[],onLoad:[]};R++;let w=u({initialOptions:g,resolve:(p,D={})=>{if(!S)throw new Error('Cannot call "resolve" before plugin setup has completed');if(typeof p!="string")throw new Error("The path to resolve must be a string");let A=Object.create(null),Q=n(D,A,"pluginName",m),z=n(D,A,"importer",m),_=n(D,A,"namespace",m),X=n(D,A,"resolveDir",m),H=n(D,A,"kind",m),j=n(D,A,"pluginData",$e);return Y(D,A,"in resolve() call"),new Promise((J,G)=>{let K={command:"resolve",path:p,key:a,pluginName:b};Q!=null&&(K.pluginName=Q),z!=null&&(K.importer=z),_!=null&&(K.namespace=_),X!=null&&(K.resolveDir=X),H!=null&&(K.kind=H),j!=null&&(K.pluginData=c.store(j)),C(F,K,(se,Z)=>{se!==null?G(new Error(se)):J({errors:de(Z.errors,c),warnings:de(Z.warnings,c),path:Z.path,external:Z.external,sideEffects:Z.sideEffects,namespace:Z.namespace,suffix:Z.suffix,pluginData:c.load(Z.pluginData)})})})},onStart(p){let D='This error came from the "onStart" callback registered here:',A=Ee(new Error(D),e,"onStart");B.push({name:b,callback:p,note:A})},onEnd(p){let D='This error came from the "onEnd" callback registered here:',A=Ee(new Error(D),e,"onEnd");$.push({name:b,callback:p,note:A})},onResolve(p,D){let A='This error came from the "onResolve" callback registered here:',Q=Ee(new Error(A),e,"onResolve"),z={},_=n(p,z,"filter",Me),X=n(p,z,"namespace",m);if(Y(p,z,`in onResolve() call for plugin ${JSON.stringify(b)}`),_==null)throw new Error("onResolve() call is missing a filter");let H=M++;x[H]={name:b,callback:D,note:Q},v.onResolve.push({id:H,filter:_.source,namespace:X||""})},onLoad(p,D){let A='This error came from the "onLoad" callback registered here:',Q=Ee(new Error(A),e,"onLoad"),z={},_=n(p,z,"filter",Me),X=n(p,z,"namespace",m);if(Y(p,z,`in onLoad() call for plugin ${JSON.stringify(b)}`),_==null)throw new Error("onLoad() call is missing a filter");let H=M++;P[H]={name:b,callback:D,note:Q},v.onLoad.push({id:H,filter:_.source,namespace:X||""})},esbuild:e.esbuild});w&&await w,L.push(v)}catch(u){return{ok:!1,error:u,pluginName:b}}}let T=async E=>{switch(E.command){case"on-start":{let y={errors:[],warnings:[]};return await Promise.all(B.map(async({name:b,callback:u,note:v})=>{try{let U=await u();if(U!=null){if(typeof U!="object")throw new Error(`Expected onStart() callback in plugin ${JSON.stringify(b)} to return an object`);let w={},p=n(U,w,"errors",V),D=n(U,w,"warnings",V);Y(U,w,`from onStart() callback in plugin ${JSON.stringify(b)}`),p!=null&&y.errors.push(...be(p,"errors",c,b)),D!=null&&y.warnings.push(...be(D,"warnings",c,b))}}catch(U){y.errors.push(ve(U,e,c,v&&v(),b))}})),y}case"on-resolve":{let y={},b="",u,v;for(let U of E.ids)try{({name:b,callback:u,note:v}=x[U]);let w=await u({path:E.path,importer:E.importer,namespace:E.namespace,resolveDir:E.resolveDir,kind:E.kind,pluginData:c.load(E.pluginData)});if(w!=null){if(typeof w!="object")throw new Error(`Expected onResolve() callback in plugin ${JSON.stringify(b)} to return an object`);let p={},D=n(w,p,"pluginName",m),A=n(w,p,"path",m),Q=n(w,p,"namespace",m),z=n(w,p,"suffix",m),_=n(w,p,"external",I),X=n(w,p,"sideEffects",I),H=n(w,p,"pluginData",$e),j=n(w,p,"errors",V),J=n(w,p,"warnings",V),G=n(w,p,"watchFiles",V),K=n(w,p,"watchDirs",V);Y(w,p,`from onResolve() callback in plugin ${JSON.stringify(b)}`),y.id=U,D!=null&&(y.pluginName=D),A!=null&&(y.path=A),Q!=null&&(y.namespace=Q),z!=null&&(y.suffix=z),_!=null&&(y.external=_),X!=null&&(y.sideEffects=X),H!=null&&(y.pluginData=c.store(H)),j!=null&&(y.errors=be(j,"errors",c,b)),J!=null&&(y.warnings=be(J,"warnings",c,b)),G!=null&&(y.watchFiles=ke(G,"watchFiles")),K!=null&&(y.watchDirs=ke(K,"watchDirs"));break}}catch(w){return{id:U,errors:[ve(w,e,c,v&&v(),b)]}}return y}case"on-load":{let y={},b="",u,v;for(let U of E.ids)try{({name:b,callback:u,note:v}=P[U]);let w=await u({path:E.path,namespace:E.namespace,suffix:E.suffix,pluginData:c.load(E.pluginData)});if(w!=null){if(typeof w!="object")throw new Error(`Expected onLoad() callback in plugin ${JSON.stringify(b)} to return an object`);let p={},D=n(w,p,"pluginName",m),A=n(w,p,"contents",pt),Q=n(w,p,"resolveDir",m),z=n(w,p,"pluginData",$e),_=n(w,p,"loader",m),X=n(w,p,"errors",V),H=n(w,p,"warnings",V),j=n(w,p,"watchFiles",V),J=n(w,p,"watchDirs",V);Y(w,p,`from onLoad() callback in plugin ${JSON.stringify(b)}`),y.id=U,D!=null&&(y.pluginName=D),A instanceof Uint8Array?y.contents=A:A!=null&&(y.contents=ce(A)),Q!=null&&(y.resolveDir=Q),z!=null&&(y.pluginData=c.store(z)),_!=null&&(y.loader=_),X!=null&&(y.errors=be(X,"errors",c,b)),H!=null&&(y.warnings=be(H,"warnings",c,b)),j!=null&&(y.watchFiles=ke(j,"watchFiles")),J!=null&&(y.watchDirs=ke(J,"watchDirs"));break}}catch(w){return{id:U,errors:[ve(w,e,c,v&&v(),b)]}}return y}default:throw new Error("Invalid command: "+E.command)}},W=(E,y,b)=>b();$.length>0&&(W=(E,y,b)=>{(async()=>{for(let{name:u,callback:v,note:U}of $)try{await v(E)}catch(w){E.errors.push(await new Promise(p=>y(w,u,U&&U(),p)))}})().then(b)}),S=!0;let ee=0;return{ok:!0,requestPlugins:L,runOnEndCallbacks:W,pluginRefs:{ref(){++ee===1&&r.set(a,T)},unref(){--ee===0&&r.delete(a)}}}},ie=(g,o,a,c)=>{let F={},B=n(o,F,"port",Oe),$=n(o,F,"host",m),x=n(o,F,"servedir",m),P=n(o,F,"onRequest",Le),M,R=new Promise((L,S)=>{M=T=>{d.delete(c),T!==null?S(new Error(T)):L()}});return a.serve={},Y(o,F,"in serve() call"),B!==void 0&&(a.serve.port=B),$!==void 0&&(a.serve.host=$),x!==void 0&&(a.serve.servedir=x),d.set(c,{onRequest:P,onWait:M}),{wait:R,stop(){C(g,{command:"serve-stop",key:c},()=>{})}}},pe="warning",ue="silent",ge=g=>{let o=l++,a=Ve(),c,{refs:F,options:B,isTTY:$,callback:x}=g;if(typeof B=="object"){let R=B.plugins;if(R!==void 0){if(!Array.isArray(R))throw new Error('"plugins" must be an array');c=R}}let P=(R,L,S,T)=>{let W=[];try{Ce(W,B,{},$,pe)}catch(E){}let ee=ve(R,e,a,S,L);C(F,{command:"error",flags:W,error:ee},()=>{ee.detail=a.load(ee.detail),T(ee)})},M=(R,L)=>{P(R,L,void 0,S=>{x(Re("Build failed",[S],[]),null)})};if(c&&c.length>0){if(e.isSync)return M(new Error("Cannot use plugins in synchronous API calls"),"");le(B,c,o,a,F).then(R=>{if(!R.ok)M(R.error,R.pluginName);else try{fe(De(Te({},g),{key:o,details:a,logPluginError:P,requestPlugins:R.requestPlugins,runOnEndCallbacks:R.runOnEndCallbacks,pluginRefs:R.pluginRefs}))}catch(L){M(L,"")}},R=>M(R,""))}else try{fe(De(Te({},g),{key:o,details:a,logPluginError:P,requestPlugins:null,runOnEndCallbacks:(R,L,S)=>S(),pluginRefs:null}))}catch(R){M(R,"")}},fe=({callName:g,refs:o,serveOptions:a,options:c,isTTY:F,defaultWD:B,callback:$,key:x,details:P,logPluginError:M,requestPlugins:R,runOnEndCallbacks:L,pluginRefs:S})=>{let T={ref(){S&&S.ref(),o&&o.ref()},unref(){S&&S.unref(),o&&o.unref()}},W=!e.isBrowser,{entries:ee,flags:E,write:y,stdinContents:b,stdinResolveDir:u,absWorkingDir:v,incremental:U,nodePaths:w,watch:p,mangleCache:D}=gt(g,c,F,pe,W),A={command:"build",key:x,entries:ee,flags:E,write:y,stdinContents:b,stdinResolveDir:u,absWorkingDir:v||B,incremental:U,nodePaths:w};R&&(A.plugins=R),D&&(A.mangleCache=D);let Q=a&&ie(T,a,A,x),z,_,X=(j,J)=>{j.outputFiles&&(J.outputFiles=j.outputFiles.map(yt)),j.metafile&&(J.metafile=JSON.parse(j.metafile)),j.mangleCache&&(J.mangleCache=j.mangleCache),j.writeToStdout!==void 0&&console.log(he(j.writeToStdout).replace(/\n$/,""))},H=(j,J)=>{let G={errors:de(j.errors,P),warnings:de(j.warnings,P)};X(j,G),L(G,M,()=>{if(G.errors.length>0)return J(Re("Build failed",G.errors,G.warnings),null);if(j.rebuild){if(!z){let K=!1;z=()=>new Promise((se,Z)=>{if(K||i)throw new Error("Cannot rebuild");C(T,{command:"rebuild",key:x},(te,et)=>{if(te)return J(Re("Build failed",[{pluginName:"",text:te,location:null,notes:[],detail:void 0}],[]),null);H(et,(Be,tt)=>{Be?Z(Be):se(tt)})})}),T.ref(),z.dispose=()=>{K||(K=!0,C(T,{command:"rebuild-dispose",key:x},()=>{}),T.unref())}}G.rebuild=z}if(j.watch){if(!_){let K=!1;T.ref(),_=()=>{K||(K=!0,s.delete(x),C(T,{command:"watch-stop",key:x},()=>{}),T.unref())},p&&s.set(x,(se,Z)=>{if(se){p.onRebuild&&p.onRebuild(se,null);return}let te={errors:de(Z.errors,P),warnings:de(Z.warnings,P)};X(Z,te),L(te,M,()=>{if(te.errors.length>0){p.onRebuild&&p.onRebuild(Re("Build failed",te.errors,te.warnings),null);return}Z.rebuildID!==void 0&&(te.rebuild=z),te.stop=_,p.onRebuild&&p.onRebuild(null,te)})})}G.stop=_}J(null,G)})};if(y&&e.isBrowser)throw new Error('Cannot enable "write" in the browser');if(U&&e.isSync)throw new Error('Cannot use "incremental" with a synchronous build');if(p&&e.isSync)throw new Error('Cannot use "watch" with a synchronous build');C(T,A,(j,J)=>{if(j)return $(new Error(j),null);if(Q){let G=J,K=!1;T.ref();let se={port:G.port,host:G.host,wait:Q.wait,stop(){K||(K=!0,Q.stop(),T.unref())}};return T.ref(),Q.wait.then(T.unref,T.unref),$(null,se)}return H(J,$)})};return{readFromStdout:N,afterClose:k,service:{buildOrServe:ge,transform:({callName:g,refs:o,input:a,options:c,isTTY:F,fs:B,callback:$})=>{let x=Ve(),P=M=>{try{if(typeof a!="string")throw new Error('The input to "transform" must be a string');let{flags:R,mangleCache:L}=mt(g,c,F,ue),S={command:"transform",flags:R,inputFS:M!==null,input:M!==null?M:a};L&&(S.mangleCache=L),C(o,S,(T,W)=>{if(T)return $(new Error(T),null);let ee=de(W.errors,x),E=de(W.warnings,x),y=1,b=()=>{if(--y===0){let u={warnings:E,code:W.code,map:W.map};W.mangleCache&&(u.mangleCache=W==null?void 0:W.mangleCache),$(null,u)}};if(ee.length>0)return $(Re("Transform failed",ee,E),null);W.codeFS&&(y++,B.readFile(W.code,(u,v)=>{u!==null?$(u,null):(W.code=v,b())})),W.mapFS&&(y++,B.readFile(W.map,(u,v)=>{u!==null?$(u,null):(W.map=v,b())})),b()})}catch(R){let L=[];try{Ce(L,c,{},F,ue)}catch(T){}let S=ve(R,e,x,void 0,"");C(o,{command:"error",flags:L,error:S},()=>{S.detail=x.load(S.detail),$(Re("Transform failed",[S],[]),null)})}};if(typeof a=="string"&&a.length>1024*1024){let M=P;P=()=>B.writeFile(a,M)}P(null)},formatMessages:({callName:g,refs:o,messages:a,options:c,callback:F})=>{let B=be(a,"messages",null,"");if(!c)throw new Error(`Missing second argument in ${g}() call`);let $={},x=n(c,$,"kind",m),P=n(c,$,"color",I),M=n(c,$,"terminalWidth",Oe);if(Y(c,$,`in ${g}() call`),x===void 0)throw new Error(`Missing "kind" in ${g}() call`);if(x!=="error"&&x!=="warning")throw new Error(`Expected "kind" to be "error" or "warning" in ${g}() call`);let R={command:"format-msgs",messages:B,isWarning:x==="warning"};P!==void 0&&(R.color=P),M!==void 0&&(R.terminalWidth=M),C(o,R,(L,S)=>{if(L)return F(new Error(L),null);F(null,S.messages)})},analyzeMetafile:({callName:g,refs:o,metafile:a,options:c,callback:F})=>{c===void 0&&(c={});let B={},$=n(c,B,"color",I),x=n(c,B,"verbose",I);Y(c,B,`in ${g}() call`);let P={command:"analyze-metafile",metafile:a};$!==void 0&&(P.color=$),x!==void 0&&(P.verbose=x),C(o,P,(M,R)=>{if(M)return F(new Error(M),null);F(null,R.result)})}}}}function Ve(){let e=new Map,t=0;return{load(r){return e.get(r)},store(r){if(r===void 0)return-1;let s=t++;return e.set(s,r),s}}}function Ee(e,t,r){let s,d=!1;return()=>{if(d)return s;d=!0;try{let i=(e.stack+"").split(`
`);i.splice(1,1);let f=Ze(t,i,r);if(f)return s={text:e.message,location:f},s}catch(i){}}}function ve(e,t,r,s,d){let i="Internal error",f=null;try{i=(e&&e.message||e)+""}catch(l){}try{f=Ze(t,(e.stack+"").split(`
`),"")}catch(l){}return{pluginName:d,text:i,location:f,notes:s?[s]:[],detail:r?r.store(e):-1}}function Ze(e,t,r){let s="    at ";if(e.readFileSync&&!t[0].startsWith(s)&&t[1].startsWith(s))for(let d=1;d<t.length;d++){let i=t[d];if(!!i.startsWith(s))for(i=i.slice(s.length);;){let f=/^(?:new |async )?\S+ \((.*)\)$/.exec(i);if(f){i=f[1];continue}if(f=/^eval at \S+ \((.*)\)(?:, \S+:\d+:\d+)?$/.exec(i),f){i=f[1];continue}if(f=/^(\S+):(\d+):(\d+)$/.exec(i),f){let l;try{l=e.readFileSync(f[1],"utf8")}catch(k){break}let h=l.split(/\r\n|\r|\n|\u2028|\u2029/)[+f[2]-1]||"",O=+f[3]-1,N=h.slice(O,O+r.length)===r?r.length:0;return{file:f[1],namespace:"file",line:+f[2],column:ce(h.slice(0,O)).length,length:ce(h.slice(O,O+N)).length,lineText:h+`
`+t.slice(1).join(`
`),suggestion:""}}break}}return null}function Re(e,t,r){let s=5,d=t.length<1?"":` with ${t.length} error${t.length<2?"":"s"}:`+t.slice(0,s+1).map((f,l)=>{if(l===s)return`
...`;if(!f.location)return`
error: ${f.text}`;let{file:h,line:O,column:N}=f.location,k=f.pluginName?`[plugin: ${f.pluginName}] `:"";return`
${h}:${O}:${N}: ERROR: ${k}${f.text}`}).join(""),i=new Error(`${e}${d}`);return i.errors=t,i.warnings=r,i}function de(e,t){for(let r of e)r.detail=t.load(r.detail);return e}function Je(e,t){if(e==null)return null;let r={},s=n(e,r,"file",m),d=n(e,r,"namespace",m),i=n(e,r,"line",Oe),f=n(e,r,"column",Oe),l=n(e,r,"length",Oe),h=n(e,r,"lineText",m),O=n(e,r,"suggestion",m);return Y(e,r,t),{file:s||"",namespace:d||"",line:i||0,column:f||0,length:l||0,lineText:h||"",suggestion:O||""}}function be(e,t,r,s){let d=[],i=0;for(let f of e){let l={},h=n(f,l,"pluginName",m),O=n(f,l,"text",m),N=n(f,l,"location",_e),k=n(f,l,"notes",V),C=n(f,l,"detail",$e),q=`in element ${i} of "${t}"`;Y(f,l,q);let ae=[];if(k)for(let re of k){let ne={},le=n(re,ne,"text",m),ie=n(re,ne,"location",_e);Y(re,ne,q),ae.push({text:le||"",location:Je(ie,q)})}d.push({pluginName:h||s,text:O||"",location:Je(N,q),notes:ae,detail:r?r.store(C):-1}),i++}return d}function ke(e,t){let r=[];for(let s of e){if(typeof s!="string")throw new Error(`${JSON.stringify(t)} must be an array of strings`);r.push(s)}return r}function yt({path:e,contents:t}){let r=null;return{path:e,contents:t,get text(){return r===null&&(r=he(t)),r}}}var bt="0.14.42",wt=e=>Pe().build(e),vt=()=>{throw new Error('The "serve" API only works in node')},Rt=(e,t)=>Pe().transform(e,t),Ot=(e,t)=>Pe().formatMessages(e,t),St=(e,t)=>Pe().analyzeMetafile(e,t),xt=()=>{throw new Error('The "buildSync" API only works in node')},Et=()=>{throw new Error('The "transformSync" API only works in node')},kt=()=>{throw new Error('The "formatMessagesSync" API only works in node')},$t=()=>{throw new Error('The "analyzeMetafileSync" API only works in node')},Se,Ue,Pe=()=>{if(Ue)return Ue;throw Se?new Error('You need to wait for the promise returned from "initialize" to be resolved before calling this'):new Error('You need to call "initialize" before calling this')},Mt=e=>{e=Qe(e||{});let t=e.wasmURL,r=e.wasmModule,s=e.worker!==!1;if(!t&&!r)throw new Error('Must provide either the "wasmURL" option or the "wasmModule" option');if(Se)throw new Error('Cannot call "initialize" more than once');return Se=Ct(t||"",r,s),Se.catch(()=>{Se=void 0}),Se},Ct=async(e,t,r)=>{let s;if(t)s=t;else{let l=await fetch(e);if(!l.ok)throw new Error(`Failed to download ${JSON.stringify(e)}`);s=await l.arrayBuffer()}let d;if(r){let l=new Blob(['onmessage=(postMessage=>{\n// Copyright 2018 The Go Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style\n// license that can be found in the LICENSE file.\nlet onmessage,globalThis={};for(let r=self;r;r=Object.getPrototypeOf(r))for(let f of Object.getOwnPropertyNames(r))f in globalThis||Object.defineProperty(globalThis,f,{get:()=>self[f]});return(()=>{const r=()=>{const c=new Error("not implemented");return c.code="ENOSYS",c};if(!globalThis.fs){let c="";globalThis.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(n,s){c+=g.decode(s);const i=c.lastIndexOf(`\n`);return i!=-1&&(console.log(c.substr(0,i)),c=c.substr(i+1)),s.length},write(n,s,i,a,h,u){if(i!==0||a!==s.length||h!==null){u(r());return}const d=this.writeSync(n,s);u(null,d)},chmod(n,s,i){i(r())},chown(n,s,i,a){a(r())},close(n,s){s(r())},fchmod(n,s,i){i(r())},fchown(n,s,i,a){a(r())},fstat(n,s){s(r())},fsync(n,s){s(null)},ftruncate(n,s,i){i(r())},lchown(n,s,i,a){a(r())},link(n,s,i){i(r())},lstat(n,s){s(r())},mkdir(n,s,i){i(r())},open(n,s,i,a){a(r())},read(n,s,i,a,h,u){u(r())},readdir(n,s){s(r())},readlink(n,s){s(r())},rename(n,s,i){i(r())},rmdir(n,s){s(r())},stat(n,s){s(r())},symlink(n,s,i){i(r())},truncate(n,s,i){i(r())},unlink(n,s){s(r())},utimes(n,s,i,a){a(r())}}}if(globalThis.process||(globalThis.process={getuid(){return-1},getgid(){return-1},geteuid(){return-1},getegid(){return-1},getgroups(){throw r()},pid:-1,ppid:-1,umask(){throw r()},cwd(){throw r()},chdir(){throw r()}}),!globalThis.crypto)throw new Error("globalThis.crypto is not available, polyfill required (crypto.getRandomValues only)");if(!globalThis.performance)throw new Error("globalThis.performance is not available, polyfill required (performance.now only)");if(!globalThis.TextEncoder)throw new Error("globalThis.TextEncoder is not available, polyfill required");if(!globalThis.TextDecoder)throw new Error("globalThis.TextDecoder is not available, polyfill required");const f=new TextEncoder("utf-8"),g=new TextDecoder("utf-8");globalThis.Go=class{constructor(){this.argv=["js"],this.env={},this.exit=e=>{e!==0&&console.warn("exit code:",e)},this._exitPromise=new Promise(e=>{this._resolveExitPromise=e}),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;const c=(e,t)=>{this.mem.setUint32(e+0,t,!0),this.mem.setUint32(e+4,Math.floor(t/4294967296),!0)},n=e=>{const t=this.mem.getUint32(e+0,!0),o=this.mem.getInt32(e+4,!0);return t+o*4294967296},s=e=>{const t=this.mem.getFloat64(e,!0);if(t===0)return;if(!isNaN(t))return t;const o=this.mem.getUint32(e,!0);return this._values[o]},i=(e,t)=>{if(typeof t=="number"&&t!==0){if(isNaN(t)){this.mem.setUint32(e+4,2146959360,!0),this.mem.setUint32(e,0,!0);return}this.mem.setFloat64(e,t,!0);return}if(t===void 0){this.mem.setFloat64(e,0,!0);return}let l=this._ids.get(t);l===void 0&&(l=this._idPool.pop(),l===void 0&&(l=this._values.length),this._values[l]=t,this._goRefCounts[l]=0,this._ids.set(t,l)),this._goRefCounts[l]++;let m=0;switch(typeof t){case"object":t!==null&&(m=1);break;case"string":m=2;break;case"symbol":m=3;break;case"function":m=4;break}this.mem.setUint32(e+4,2146959360|m,!0),this.mem.setUint32(e,l,!0)},a=e=>{const t=n(e+0),o=n(e+8);return new Uint8Array(this._inst.exports.mem.buffer,t,o)},h=e=>{const t=n(e+0),o=n(e+8),l=new Array(o);for(let m=0;m<o;m++)l[m]=s(t+m*8);return l},u=e=>{const t=n(e+0),o=n(e+8);return g.decode(new DataView(this._inst.exports.mem.buffer,t,o))},d=Date.now()-performance.now();this.importObject={go:{"runtime.wasmExit":e=>{e>>>=0;const t=this.mem.getInt32(e+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._goRefCounts,delete this._ids,delete this._idPool,this.exit(t)},"runtime.wasmWrite":e=>{e>>>=0;const t=n(e+8),o=n(e+16),l=this.mem.getInt32(e+24,!0);globalThis.fs.writeSync(t,new Uint8Array(this._inst.exports.mem.buffer,o,l))},"runtime.resetMemoryDataView":e=>{e>>>=0,this.mem=new DataView(this._inst.exports.mem.buffer)},"runtime.nanotime1":e=>{e>>>=0,c(e+8,(d+performance.now())*1e6)},"runtime.walltime":e=>{e>>>=0;const t=new Date().getTime();c(e+8,t/1e3),this.mem.setInt32(e+16,t%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":e=>{e>>>=0;const t=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(t,setTimeout(()=>{for(this._resume();this._scheduledTimeouts.has(t);)console.warn("scheduleTimeoutEvent: missed timeout event"),this._resume()},n(e+8)+1)),this.mem.setInt32(e+16,t,!0)},"runtime.clearTimeoutEvent":e=>{e>>>=0;const t=this.mem.getInt32(e+8,!0);clearTimeout(this._scheduledTimeouts.get(t)),this._scheduledTimeouts.delete(t)},"runtime.getRandomData":e=>{e>>>=0,crypto.getRandomValues(a(e+8))},"syscall/js.finalizeRef":e=>{e>>>=0;const t=this.mem.getUint32(e+8,!0);if(this._goRefCounts[t]--,this._goRefCounts[t]===0){const o=this._values[t];this._values[t]=null,this._ids.delete(o),this._idPool.push(t)}},"syscall/js.stringVal":e=>{e>>>=0,i(e+24,u(e+8))},"syscall/js.valueGet":e=>{e>>>=0;const t=Reflect.get(s(e+8),u(e+16));e=this._inst.exports.getsp()>>>0,i(e+32,t)},"syscall/js.valueSet":e=>{e>>>=0,Reflect.set(s(e+8),u(e+16),s(e+32))},"syscall/js.valueDelete":e=>{e>>>=0,Reflect.deleteProperty(s(e+8),u(e+16))},"syscall/js.valueIndex":e=>{e>>>=0,i(e+24,Reflect.get(s(e+8),n(e+16)))},"syscall/js.valueSetIndex":e=>{e>>>=0,Reflect.set(s(e+8),n(e+16),s(e+24))},"syscall/js.valueCall":e=>{e>>>=0;try{const t=s(e+8),o=Reflect.get(t,u(e+16)),l=h(e+32),m=Reflect.apply(o,t,l);e=this._inst.exports.getsp()>>>0,i(e+56,m),this.mem.setUint8(e+64,1)}catch(t){e=this._inst.exports.getsp()>>>0,i(e+56,t),this.mem.setUint8(e+64,0)}},"syscall/js.valueInvoke":e=>{e>>>=0;try{const t=s(e+8),o=h(e+16),l=Reflect.apply(t,void 0,o);e=this._inst.exports.getsp()>>>0,i(e+40,l),this.mem.setUint8(e+48,1)}catch(t){e=this._inst.exports.getsp()>>>0,i(e+40,t),this.mem.setUint8(e+48,0)}},"syscall/js.valueNew":e=>{e>>>=0;try{const t=s(e+8),o=h(e+16),l=Reflect.construct(t,o);e=this._inst.exports.getsp()>>>0,i(e+40,l),this.mem.setUint8(e+48,1)}catch(t){e=this._inst.exports.getsp()>>>0,i(e+40,t),this.mem.setUint8(e+48,0)}},"syscall/js.valueLength":e=>{e>>>=0,c(e+16,parseInt(s(e+8).length))},"syscall/js.valuePrepareString":e=>{e>>>=0;const t=f.encode(String(s(e+8)));i(e+16,t),c(e+24,t.length)},"syscall/js.valueLoadString":e=>{e>>>=0;const t=s(e+8);a(e+16).set(t)},"syscall/js.valueInstanceOf":e=>{e>>>=0,this.mem.setUint8(e+24,s(e+8)instanceof s(e+16)?1:0)},"syscall/js.copyBytesToGo":e=>{e>>>=0;const t=a(e+8),o=s(e+32);if(!(o instanceof Uint8Array||o instanceof Uint8ClampedArray)){this.mem.setUint8(e+48,0);return}const l=o.subarray(0,t.length);t.set(l),c(e+40,l.length),this.mem.setUint8(e+48,1)},"syscall/js.copyBytesToJS":e=>{e>>>=0;const t=s(e+8),o=a(e+16);if(!(t instanceof Uint8Array||t instanceof Uint8ClampedArray)){this.mem.setUint8(e+48,0);return}const l=o.subarray(0,t.length);t.set(l),c(e+40,l.length),this.mem.setUint8(e+48,1)},debug:e=>{console.log(e)}}}}async run(c){if(!(c instanceof WebAssembly.Instance))throw new Error("Go.run: WebAssembly.Instance expected");this._inst=c,this.mem=new DataView(this._inst.exports.mem.buffer),this._values=[NaN,0,null,!0,!1,globalThis,this],this._goRefCounts=new Array(this._values.length).fill(1/0),this._ids=new Map([[0,1],[null,2],[!0,3],[!1,4],[globalThis,5],[this,6]]),this._idPool=[],this.exited=!1;let n=4096;const s=e=>{const t=n,o=f.encode(e+"\\0");return new Uint8Array(this.mem.buffer,n,o.length).set(o),n+=o.length,n%8!==0&&(n+=8-n%8),t},i=this.argv.length,a=[];this.argv.forEach(e=>{a.push(s(e))}),a.push(0),Object.keys(this.env).sort().forEach(e=>{a.push(s(`${e}=${this.env[e]}`))}),a.push(0);const u=n;a.forEach(e=>{this.mem.setUint32(n,e,!0),this.mem.setUint32(n+4,0,!0),n+=8});const d=4096+8192;if(n>=d)throw new Error("total length of command line and environment variables exceeds limit");this._inst.exports.run(i,u),this.exited&&this._resolveExitPromise(),await this._exitPromise}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(c){const n=this;return function(){const s={id:c,this:this,args:arguments};return n._pendingEvent=s,n._resume(),s.result}}}})(),onmessage=({data:r})=>{let f=new TextDecoder,g=globalThis.fs,c="";g.writeSync=(h,u)=>{if(h===1)postMessage(u);else if(h===2){c+=f.decode(u);let d=c.split(`\n`);d.length>1&&console.log(d.slice(0,-1).join(`\n`)),c=d[d.length-1]}else throw new Error("Bad write");return u.length};let n=[],s,i=0;onmessage=({data:h})=>{h.length>0&&(n.push(h),s&&s())},g.read=(h,u,d,e,t,o)=>{if(h!==0||d!==0||e!==u.length||t!==null)throw new Error("Bad read");if(n.length===0){s=()=>g.read(h,u,d,e,t,o);return}let l=n[0],m=Math.max(0,Math.min(e,l.length-i));u.set(l.subarray(i,i+m),d),i+=m,i===l.length&&(n.shift(),i=0),o(null,m)};let a=new globalThis.Go;a.argv=["","--service=0.14.42"],r instanceof WebAssembly.Module?WebAssembly.instantiate(r,a.importObject).then(h=>a.run(h)):WebAssembly.instantiate(r,a.importObject).then(({instance:h})=>a.run(h))},r=>onmessage(r);})(postMessage)'],{type:"text/javascript"});d=new Worker(URL.createObjectURL(l))}else{let l=(postMessage=>{
// Copyright 2018 The Go Authors. All rights reserved.
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
let onmessage,globalThis={};for(let r=self;r;r=Object.getPrototypeOf(r))for(let f of Object.getOwnPropertyNames(r))f in globalThis||Object.defineProperty(globalThis,f,{get:()=>self[f]});return(()=>{const r=()=>{const c=new Error("not implemented");return c.code="ENOSYS",c};if(!globalThis.fs){let c="";globalThis.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(n,s){c+=g.decode(s);const i=c.lastIndexOf(`
`);return i!=-1&&(console.log(c.substr(0,i)),c=c.substr(i+1)),s.length},write(n,s,i,a,h,u){if(i!==0||a!==s.length||h!==null){u(r());return}const d=this.writeSync(n,s);u(null,d)},chmod(n,s,i){i(r())},chown(n,s,i,a){a(r())},close(n,s){s(r())},fchmod(n,s,i){i(r())},fchown(n,s,i,a){a(r())},fstat(n,s){s(r())},fsync(n,s){s(null)},ftruncate(n,s,i){i(r())},lchown(n,s,i,a){a(r())},link(n,s,i){i(r())},lstat(n,s){s(r())},mkdir(n,s,i){i(r())},open(n,s,i,a){a(r())},read(n,s,i,a,h,u){u(r())},readdir(n,s){s(r())},readlink(n,s){s(r())},rename(n,s,i){i(r())},rmdir(n,s){s(r())},stat(n,s){s(r())},symlink(n,s,i){i(r())},truncate(n,s,i){i(r())},unlink(n,s){s(r())},utimes(n,s,i,a){a(r())}}}if(globalThis.process||(globalThis.process={getuid(){return-1},getgid(){return-1},geteuid(){return-1},getegid(){return-1},getgroups(){throw r()},pid:-1,ppid:-1,umask(){throw r()},cwd(){throw r()},chdir(){throw r()}}),!globalThis.crypto)throw new Error("globalThis.crypto is not available, polyfill required (crypto.getRandomValues only)");if(!globalThis.performance)throw new Error("globalThis.performance is not available, polyfill required (performance.now only)");if(!globalThis.TextEncoder)throw new Error("globalThis.TextEncoder is not available, polyfill required");if(!globalThis.TextDecoder)throw new Error("globalThis.TextDecoder is not available, polyfill required");const f=new TextEncoder("utf-8"),g=new TextDecoder("utf-8");globalThis.Go=class{constructor(){this.argv=["js"],this.env={},this.exit=e=>{e!==0&&console.warn("exit code:",e)},this._exitPromise=new Promise(e=>{this._resolveExitPromise=e}),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;const c=(e,t)=>{this.mem.setUint32(e+0,t,!0),this.mem.setUint32(e+4,Math.floor(t/4294967296),!0)},n=e=>{const t=this.mem.getUint32(e+0,!0),o=this.mem.getInt32(e+4,!0);return t+o*4294967296},s=e=>{const t=this.mem.getFloat64(e,!0);if(t===0)return;if(!isNaN(t))return t;const o=this.mem.getUint32(e,!0);return this._values[o]},i=(e,t)=>{if(typeof t=="number"&&t!==0){if(isNaN(t)){this.mem.setUint32(e+4,2146959360,!0),this.mem.setUint32(e,0,!0);return}this.mem.setFloat64(e,t,!0);return}if(t===void 0){this.mem.setFloat64(e,0,!0);return}let l=this._ids.get(t);l===void 0&&(l=this._idPool.pop(),l===void 0&&(l=this._values.length),this._values[l]=t,this._goRefCounts[l]=0,this._ids.set(t,l)),this._goRefCounts[l]++;let m=0;switch(typeof t){case"object":t!==null&&(m=1);break;case"string":m=2;break;case"symbol":m=3;break;case"function":m=4;break}this.mem.setUint32(e+4,2146959360|m,!0),this.mem.setUint32(e,l,!0)},a=e=>{const t=n(e+0),o=n(e+8);return new Uint8Array(this._inst.exports.mem.buffer,t,o)},h=e=>{const t=n(e+0),o=n(e+8),l=new Array(o);for(let m=0;m<o;m++)l[m]=s(t+m*8);return l},u=e=>{const t=n(e+0),o=n(e+8);return g.decode(new DataView(this._inst.exports.mem.buffer,t,o))},d=Date.now()-performance.now();this.importObject={go:{"runtime.wasmExit":e=>{e>>>=0;const t=this.mem.getInt32(e+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._goRefCounts,delete this._ids,delete this._idPool,this.exit(t)},"runtime.wasmWrite":e=>{e>>>=0;const t=n(e+8),o=n(e+16),l=this.mem.getInt32(e+24,!0);globalThis.fs.writeSync(t,new Uint8Array(this._inst.exports.mem.buffer,o,l))},"runtime.resetMemoryDataView":e=>{e>>>=0,this.mem=new DataView(this._inst.exports.mem.buffer)},"runtime.nanotime1":e=>{e>>>=0,c(e+8,(d+performance.now())*1e6)},"runtime.walltime":e=>{e>>>=0;const t=new Date().getTime();c(e+8,t/1e3),this.mem.setInt32(e+16,t%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":e=>{e>>>=0;const t=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(t,setTimeout(()=>{for(this._resume();this._scheduledTimeouts.has(t);)console.warn("scheduleTimeoutEvent: missed timeout event"),this._resume()},n(e+8)+1)),this.mem.setInt32(e+16,t,!0)},"runtime.clearTimeoutEvent":e=>{e>>>=0;const t=this.mem.getInt32(e+8,!0);clearTimeout(this._scheduledTimeouts.get(t)),this._scheduledTimeouts.delete(t)},"runtime.getRandomData":e=>{e>>>=0,crypto.getRandomValues(a(e+8))},"syscall/js.finalizeRef":e=>{e>>>=0;const t=this.mem.getUint32(e+8,!0);if(this._goRefCounts[t]--,this._goRefCounts[t]===0){const o=this._values[t];this._values[t]=null,this._ids.delete(o),this._idPool.push(t)}},"syscall/js.stringVal":e=>{e>>>=0,i(e+24,u(e+8))},"syscall/js.valueGet":e=>{e>>>=0;const t=Reflect.get(s(e+8),u(e+16));e=this._inst.exports.getsp()>>>0,i(e+32,t)},"syscall/js.valueSet":e=>{e>>>=0,Reflect.set(s(e+8),u(e+16),s(e+32))},"syscall/js.valueDelete":e=>{e>>>=0,Reflect.deleteProperty(s(e+8),u(e+16))},"syscall/js.valueIndex":e=>{e>>>=0,i(e+24,Reflect.get(s(e+8),n(e+16)))},"syscall/js.valueSetIndex":e=>{e>>>=0,Reflect.set(s(e+8),n(e+16),s(e+24))},"syscall/js.valueCall":e=>{e>>>=0;try{const t=s(e+8),o=Reflect.get(t,u(e+16)),l=h(e+32),m=Reflect.apply(o,t,l);e=this._inst.exports.getsp()>>>0,i(e+56,m),this.mem.setUint8(e+64,1)}catch(t){e=this._inst.exports.getsp()>>>0,i(e+56,t),this.mem.setUint8(e+64,0)}},"syscall/js.valueInvoke":e=>{e>>>=0;try{const t=s(e+8),o=h(e+16),l=Reflect.apply(t,void 0,o);e=this._inst.exports.getsp()>>>0,i(e+40,l),this.mem.setUint8(e+48,1)}catch(t){e=this._inst.exports.getsp()>>>0,i(e+40,t),this.mem.setUint8(e+48,0)}},"syscall/js.valueNew":e=>{e>>>=0;try{const t=s(e+8),o=h(e+16),l=Reflect.construct(t,o);e=this._inst.exports.getsp()>>>0,i(e+40,l),this.mem.setUint8(e+48,1)}catch(t){e=this._inst.exports.getsp()>>>0,i(e+40,t),this.mem.setUint8(e+48,0)}},"syscall/js.valueLength":e=>{e>>>=0,c(e+16,parseInt(s(e+8).length))},"syscall/js.valuePrepareString":e=>{e>>>=0;const t=f.encode(String(s(e+8)));i(e+16,t),c(e+24,t.length)},"syscall/js.valueLoadString":e=>{e>>>=0;const t=s(e+8);a(e+16).set(t)},"syscall/js.valueInstanceOf":e=>{e>>>=0,this.mem.setUint8(e+24,s(e+8)instanceof s(e+16)?1:0)},"syscall/js.copyBytesToGo":e=>{e>>>=0;const t=a(e+8),o=s(e+32);if(!(o instanceof Uint8Array||o instanceof Uint8ClampedArray)){this.mem.setUint8(e+48,0);return}const l=o.subarray(0,t.length);t.set(l),c(e+40,l.length),this.mem.setUint8(e+48,1)},"syscall/js.copyBytesToJS":e=>{e>>>=0;const t=s(e+8),o=a(e+16);if(!(t instanceof Uint8Array||t instanceof Uint8ClampedArray)){this.mem.setUint8(e+48,0);return}const l=o.subarray(0,t.length);t.set(l),c(e+40,l.length),this.mem.setUint8(e+48,1)},debug:e=>{console.log(e)}}}}async run(c){if(!(c instanceof WebAssembly.Instance))throw new Error("Go.run: WebAssembly.Instance expected");this._inst=c,this.mem=new DataView(this._inst.exports.mem.buffer),this._values=[NaN,0,null,!0,!1,globalThis,this],this._goRefCounts=new Array(this._values.length).fill(1/0),this._ids=new Map([[0,1],[null,2],[!0,3],[!1,4],[globalThis,5],[this,6]]),this._idPool=[],this.exited=!1;let n=4096;const s=e=>{const t=n,o=f.encode(e+"\0");return new Uint8Array(this.mem.buffer,n,o.length).set(o),n+=o.length,n%8!==0&&(n+=8-n%8),t},i=this.argv.length,a=[];this.argv.forEach(e=>{a.push(s(e))}),a.push(0),Object.keys(this.env).sort().forEach(e=>{a.push(s(`${e}=${this.env[e]}`))}),a.push(0);const u=n;a.forEach(e=>{this.mem.setUint32(n,e,!0),this.mem.setUint32(n+4,0,!0),n+=8});const d=4096+8192;if(n>=d)throw new Error("total length of command line and environment variables exceeds limit");this._inst.exports.run(i,u),this.exited&&this._resolveExitPromise(),await this._exitPromise}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(c){const n=this;return function(){const s={id:c,this:this,args:arguments};return n._pendingEvent=s,n._resume(),s.result}}}})(),onmessage=({data:r})=>{let f=new TextDecoder,g=globalThis.fs,c="";g.writeSync=(h,u)=>{if(h===1)postMessage(u);else if(h===2){c+=f.decode(u);let d=c.split(`
`);d.length>1&&console.log(d.slice(0,-1).join(`
`)),c=d[d.length-1]}else throw new Error("Bad write");return u.length};let n=[],s,i=0;onmessage=({data:h})=>{h.length>0&&(n.push(h),s&&s())},g.read=(h,u,d,e,t,o)=>{if(h!==0||d!==0||e!==u.length||t!==null)throw new Error("Bad read");if(n.length===0){s=()=>g.read(h,u,d,e,t,o);return}let l=n[0],m=Math.max(0,Math.min(e,l.length-i));u.set(l.subarray(i,i+m),d),i+=m,i===l.length&&(n.shift(),i=0),o(null,m)};let a=new globalThis.Go;a.argv=["","--service=0.14.42"],r instanceof WebAssembly.Module?WebAssembly.instantiate(r,a.importObject).then(h=>a.run(h)):WebAssembly.instantiate(r,a.importObject).then(({instance:h})=>a.run(h))},r=>onmessage(r);})(h=>d.onmessage({data:h}));d={onmessage:null,postMessage:h=>setTimeout(()=>l({data:h})),terminate(){}}}d.postMessage(s),d.onmessage=({data:l})=>i(l);let{readFromStdout:i,service:f}=Xe({writeToStdin(l){d.postMessage(l)},isSync:!1,isBrowser:!0,esbuild:Ae});Ue={build:l=>new Promise((h,O)=>f.buildOrServe({callName:"build",refs:null,serveOptions:null,options:l,isTTY:!1,defaultWD:"/",callback:(N,k)=>N?O(N):h(k)})),transform:(l,h)=>new Promise((O,N)=>f.transform({callName:"transform",refs:null,input:l,options:h||{},isTTY:!1,fs:{readFile(k,C){C(new Error("Internal error"),null)},writeFile(k,C){C(null)}},callback:(k,C)=>k?N(k):O(C)})),formatMessages:(l,h)=>new Promise((O,N)=>f.formatMessages({callName:"formatMessages",refs:null,messages:l,options:h,callback:(k,C)=>k?N(k):O(C)})),analyzeMetafile:(l,h)=>new Promise((O,N)=>f.analyzeMetafile({callName:"analyzeMetafile",refs:null,metafile:typeof l=="string"?l:JSON.stringify(l),options:h,callback:(k,C)=>k?N(k):O(C)}))}},Pt=Ae;export{St as analyzeMetafile,$t as analyzeMetafileSync,wt as build,xt as buildSync,Pt as default,Ot as formatMessages,kt as formatMessagesSync,Mt as initialize,vt as serve,Rt as transform,Et as transformSync,bt as version};
